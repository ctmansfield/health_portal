{% include 'components/header.html' %}

<div class="hp-labs-liver" data-person-id="{{ person_id|default('') }}" data-metrics="alt,ast,alp,ggt,bili_total,bili_direct,albumin">
  <div class="hp-labs-controls" style="margin-bottom:12px"></div>
  <div class="hp-labs-body"></div>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
<script src="/static/js/labs_shared.js"></script>
<script src="/static/js/labs_overlays.js"></script>
<script src="/static/js/labs_liver_v2.js"></script>
<style>
.hp-labs-liver{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;max-width:1000px}
.hp-labs-row{display:flex;flex-wrap:wrap;gap:16px;margin:8px 0}
.hp-labs-chart{flex:1 1 320px;border-radius:8px;padding:8px;background:#f8fafc}
.hp-labs-chart figure{margin:0}
.hp-labs-chart canvas{display:block;width:100%;height:160px;max-width:100%}
.hp-labs-skel{height:160px;background:linear-gradient(90deg,#f3f4f6,#e5e7eb,#f3f4f6);background-size:200% 100%;animation:hp-s 1.1s linear infinite;border-radius:8px}
@keyframes hp-s{0%{background-position:200% 0}100%{background-position:-200% 0}}
.hp-empty{color:#475569;padding:16px}
.hp-error{background:#fee2e2;color:#831843;padding:8px;border-radius:8px}
.hp-export{background:#fff;border:1px solid #e6eef8;padding:6px 10px;border-radius:8px;cursor:pointer}
</style>
