:root{
  --accent:#2563eb;
  --muted:#6b7280;
  --bg:#f7fafc;
  --card:#ffffff;
  --accent-2:#06b6d4;
}
body{font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial; background:var(--bg); color:#0f172a; margin:0;}
.header{background:linear-gradient(90deg,var(--accent),var(--accent-2)); padding:18px 32px; color:white}
.header-inner{display:flex;align-items:center;gap:16px;max-width:1100px;margin:0 auto}
.header-inner h1{margin:0;font-weight:600}
.header-nav{margin-left:auto;display:flex;gap:12px}
.header-link{color:rgba(255,255,255,0.92);text-decoration:none;font-weight:600}
.header-link:hover{opacity:0.9}
.container{max-width:1100px;margin:24px auto;padding:0 16px}
.controls{display:flex;gap:12px;align-items:center;margin:16px 0}
.controls input[type=text], .controls input[type=number]{padding:8px;border-radius:8px;border:1px solid #e6eef8}
.btn{display:inline-block;background:var(--accent);color:white;border:none;padding:8px 12px;border-radius:8px;cursor:pointer;text-decoration:none}
.btn:disabled{opacity:0.6;cursor:not-allowed}
.grid{display:grid;grid-template-columns:minmax(0,680px) 360px;gap:18px;align-items:start}
.grid-2{display:grid;grid-template-columns:repeat(2,1fr);gap:18px}
.card{background:var(--card);border-radius:12px;padding:16px;box-shadow:0 6px 30px rgba(15,23,42,0.06);transition:transform .12s ease,box-shadow .12s ease}
.card:hover{transform:translateY(-4px);box-shadow:0 12px 36px rgba(15,23,42,0.08)}
.card--narrow{max-width:480px;margin:36px auto;padding:24px}
.card h2{margin-top:0;margin-bottom:8px}
.card h3{font-size:1rem;margin:0 0 8px 0}
.table{overflow:auto}
table{width:100%;border-collapse:collapse;font-size:14px}
th,td{padding:10px;border-bottom:1px solid #eef2f7;text-align:left}
th{color:var(--muted);font-weight:600}
.kv{display:flex;gap:12px}
.badge{background:#fee2e2;color:#b91c1c;padding:4px 8px;border-radius:8px;font-weight:600}
.footer{margin:32px 0;color:var(--muted);font-size:13px}
.muted{color:var(--muted)}
.form-inline{display:flex;gap:8px;align-items:center}
.form-control{padding:10px;border-radius:8px;border:1px solid #e6eef8}
.icon{width:18px;height:18px;vertical-align:middle;margin-right:8px;display:inline-block}
.card-link{color:var(--accent);text-decoration:none;font-weight:600}
.error-text{color:#dc2626;margin-top:12px}
.page-header{margin-bottom:12px}
.card h3{display:flex;align-items:center;gap:8px;margin:0 0 8px 0}
.mt-12{margin-top:12px}
.mt-16{margin-top:16px}
.mt-18{margin-top:18px}
.flex-row{display:flex;gap:12px;align-items:center}
.stack{display:flex;flex-direction:column;gap:12px}
.text-center{text-align:center}
.text-small{font-size:14px;color:var(--muted)}
.value-large{font-size:20px;font-weight:700}
.mb-8{margin-bottom:8px}

/* UI-6 dashboard canvas fixes: prevent overflow/overlap and add sparkline backgrounds */
.card{overflow:hidden}
/* allow flex children to shrink (fixes overflow where sparklines pushed past card edge) */
.flex-row > div{min-width:0; overflow:hidden}
/* make canvases responsive and prevent intrinsic width overflow */
.card canvas{display:block;width:100% !important;max-width:100%;height:auto !important;background:rgba(15,23,42,0.02);border-radius:6px;box-sizing:border-box}
/* sparklines: enforce height and small padding/bg; target canvas specifically */
canvas#hrSpark, canvas#spo2Spark{background:rgba(37,99,235,0.04);padding:6px;border-radius:6px;height:40px !important;width:100% !important;box-sizing:border-box}
/* ensure the small metric tiles don't allow their canvas to overflow */
.flex-row > div canvas{max-height:40px;object-fit:contain}
.card .value-large{position:relative;z-index:1}

/* New dashboard-main layout per UI-6 instructions */
.dashboard-main{
  display:grid;
  grid-template-columns: 60% 40%;
  gap:24px;
  align-items:stretch;
}
.panel{display:flex;flex-direction:column;height:100%}
.chart-panel .chart-wrap{flex:1 1 auto}

.panel{
  background:#fff;
  border-radius:16px;
  box-shadow:0 10px 20px rgba(0,0,0,.05);
  padding:16px;
  box-sizing:border-box;
}
.chart-panel h2{ margin:0 0 12px; }
.chart-wrap{
  position:relative;
  width:100%;
  aspect-ratio:16/9;
  overflow:hidden;
}
.chart-wrap canvas{
  display:block;
  width:100% !important;
  height:100% !important;
}
.summary-card{ position:sticky; top:16px; max-width:560px; }
@media (max-width:1024px){
  .dashboard-main{ grid-template-columns:1fr; }
  .summary-card{ position:static; }
}

/* make sure small sparklines receive pointer events and sit above background */
.chart-wrap canvas, #hrSpark, #spo2Spark { pointer-events: auto; position: relative; z-index: 2; background-clip: padding-box; }


/* Labs Critical layout */
.hp-toolbar-row{display:flex;align-items:center;gap:12px;margin-bottom:8px}
.hp-toolbar-row .hp-title{margin-left:auto;font-size:14px;color:#667085}
.hp-labs-critical .hp-labs-toolbar{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0}
.hp-labs-body{display:grid;grid-template-columns:1fr;gap:16px}
.hp-labs-chart .chart-wrap{position:relative;width:100%;aspect-ratio:16/9;overflow:hidden}
.hp-labs-chart canvas{display:block;width:100%!important;height:100%!important}
.hp-row{display:flex;gap:8px;align-items:center;margin-top:8px}
.hp-link{color:#2563eb;text-decoration:underline}
.hp-caption{color:#6b7280;font-size:.85rem}
.hp-muted{color:#6b7280}
.hp-error{color:#b91c1c}
.hp-skeleton{background:linear-gradient(90deg,#f3f4f6,#e5e7eb,#f3f4f6);height:160px;border-radius:12px;animation:s 1.2s infinite}
@keyframes s{0%{background-position:-200px 0}100%{background-position:calc(200px + 100%) 0}}

/* --- Dashboard layout fixes --- */
.dashboard-grid{display:grid;grid-template-columns:1fr;gap:16px}
@media (min-width: 1024px){ .dashboard-grid{grid-template-columns:2fr 1fr} }
.panel{background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(2,8,20,.06);padding:16px}
.panel h2,h3,h4{margin-top:0}

/* chart + summary side-by-side; stack on small screens */
.hp-grid-2 {
  display: grid;
  grid-template-columns: minmax(0, 2fr) minmax(0, 1fr);
  gap: 24px;
  align-items: start;
}
@media (max-width: 1024px) {
  .hp-grid-2 { grid-template-columns: 1fr; }
}

/* keep the big chart reasonable */
.chart-card canvas { height: 320px !important; }
.chart-card .chart-container,
.summary-card .hp-sparkline { max-width: 100%; overflow: hidden; }

/* === Labs page === */
.hp-labs-critical { margin-top: 12px; }
.hp-labs-toolbar { display:flex; gap:8px; align-items:center; padding:8px 10px; border:1px solid #e6eef8; border-radius:10px; background:#fff; margin-bottom:12px; }
.hp-labs-row { display:grid; grid-template-columns: repeat(auto-fit, minmax(360px, 1fr)); gap:18px; }
.hp-labs-chart { background:#fff; border:1px solid #e6eef8; border-radius:12px; padding:12px 14px; box-shadow:0 1px 2px rgba(0,0,0,.04); }
.hp-labs-chart h4 { margin: 0 0 8px 0; }

/* Ensure canvases are not gigantic */
.hp-labs-chart canvas { width:100% !important; height:280px !important; display:block; }

/* === Dashboard 2-col layout for HR chart + Summary === */
.hp-grid-2 { display:grid; grid-template-columns: minmax(0, 2fr) minmax(0, 1fr); gap:24px; align-items:start; }
@media (max-width: 1024px){ .hp-grid-2 { grid-template-columns: 1fr; } }
.chart-card canvas { height: 300px !important; }

/* ---- Dashboard top row: chart + summary side-by-side ---- */
.hp-dash-toprow { display:grid; gap:16px; grid-template-columns: 2fr 1fr; align-items:start; }
@media (max-width: 1100px) { .hp-dash-toprow { grid-template-columns: 1fr; } }

.hp-card { background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:12px; box-shadow:0 1px 2px rgba(0,0,0,.04); }

.hp-card.chart-large canvas { height: 360px !important; width: 100% !important; }

/* ===== Dashboard two-column layout (chart + summary) ===== */
.hp-top-two-col{
  display:grid;
  grid-template-columns: 2fr 1fr;
  gap: 16px;
  align-items:start;
}
@media (max-width: 1100px){
  .hp-top-two-col{ grid-template-columns: 1fr; }
}

/* Keep big charts from getting absurdly tall */
.hp-chart-figure canvas{
  width: 100% !important;
  height: 360px !important;      /* Adjust if you want a bit taller/shorter */
  max-height: 420px !important;
}

/* Card shell (if not already present) */
.hp-card{
  background:#fff;
  border-radius:12px;
  box-shadow: 0 6px 24px rgba(2,6,23,0.06);
  padding:16px;
}
